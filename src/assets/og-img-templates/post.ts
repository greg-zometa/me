import { SITE } from "@config";
import type { PostsCollection } from "@types";

interface ColorOptions {
  accent: string;
  border: string;
  fill: string;
}

export const postOgImg = (
  { data: { dynamicOgImg, readingTime, title } }: PostsCollection,
  { accent, border, fill }: ColorOptions
) => ({
  type: "section",
  props: {
    style: { display: "flex", backgroundColor: "#000", height: "100%" },
    children: [
      {
        type: "div",
        props: {
          style: {
            display: "flex",
            marginTop: "auto",
            marginBottom: "auto",
            placeSelf: "center",
            width: "360px"
          },
          children: [
            {
              type: "div",
              props: {
                style: {
                  display: "flex",
                  flexDirection: "column",
                  alignItems: "flex-start",
                  gap: "16px",
                  padding: "32px",
                  width: "100%",
                  height: "100%"
                },
                children: [
                  {
                    type: "div",
                    props: {
                      style: {
                        display: "flex",
                        alignItems: "center",
                        gap: "12px"
                      },
                      children: [
                        {
                          type: "svg",
                          props: {
                            width: "50px",
                            height: "50px",
                            viewBox: "0 0 50 50",
                            children: [
                              {
                                type: "path",
                                props: {
                                  fill: "#fff",
                                  d: "M 25 4.167969 C 36.507812 4.167969 45.832031 13.492188 45.832031 25 C 45.832031 36.507812 36.507812 45.832031 25 45.832031 C 13.492188 45.832031 4.167969 36.507812 4.167969 25 C 4.167969 13.492188 13.492188 4.167969 25 4.167969 Z M 25 4.167969 "
                                }
                              },
                              {
                                type: "path",
                                props: {
                                  fill: "#000",
                                  d: "M 22.40625 5.03125 C 18.648438 5.542969 15.003906 7.136719 12.207031 9.492188 C 8.386719 12.707031 6.003906 16.867188 5.132812 21.796875 C 5.015625 22.503906 4.976562 23.234375 4.96875 24.957031 C 4.96875 26.910156 4.996094 27.359375 5.1875 28.394531 C 5.664062 31.070312 6.671875 33.609375 8.195312 35.953125 C 9.605469 38.125 11.8125 40.332031 13.996094 41.753906 C 17.394531 43.953125 20.976562 45.023438 24.988281 45.023438 C 29.003906 45.023438 32.585938 43.953125 35.984375 41.753906 C 38.164062 40.332031 40.375 38.125 41.785156 35.953125 C 43.304688 33.609375 44.3125 31.070312 44.789062 28.394531 C 44.980469 27.359375 45.007812 26.910156 45.007812 24.957031 C 45 22.566406 44.925781 21.835938 44.460938 19.984375 C 43.855469 17.582031 42.527344 14.863281 40.949219 12.773438 C 40.273438 11.875 38.804688 10.363281 37.769531 9.492188 C 35.515625 7.597656 32.226562 5.964844 29.414062 5.351562 C 27.324219 4.894531 24.382812 4.765625 22.40625 5.03125 Z M 27.324219 7.320312 C 28.371094 7.496094 29.726562 7.925781 30.878906 8.429688 C 33.90625 9.757812 36.175781 11.800781 36.882812 13.808594 C 37.449219 15.464844 37.523438 17.757812 37.074219 20.027344 C 37.011719 20.324219 36.929688 20.5625 36.890625 20.5625 C 36.753906 20.5625 34.882812 19.828125 33.328125 19.167969 C 29.890625 17.710938 27.269531 16.308594 24.539062 14.496094 C 21.9375 12.761719 18.308594 10.097656 18.238281 9.878906 C 18.179688 9.722656 19.691406 8.621094 20.589844 8.15625 C 21.542969 7.660156 22.304688 7.402344 23.386719 7.230469 C 24.375 7.074219 26.125 7.109375 27.324219 7.320312 Z M 19.171875 11.910156 L 22.222656 14.359375 L 23.613281 15.476562 L 23.550781 16.117188 C 23.421875 17.234375 23.476562 19.175781 23.652344 19.863281 C 24 21.3125 24.742188 22.347656 25.8125 22.886719 C 27.371094 23.667969 28.847656 23.484375 30.304688 22.339844 C 30.871094 21.898438 31.789062 20.816406 32.027344 20.304688 C 32.109375 20.140625 32.21875 20.019531 32.265625 20.039062 L 34.519531 20.789062 L 36.707031 21.53125 C 36.828125 21.632812 35.625 24.765625 34.929688 26.167969 C 34.398438 27.238281 34.351562 27.304688 33.042969 29.320312 C 31.933594 31.015625 31.402344 32.058594 31.402344 32.554688 C 31.402344 32.949219 31.550781 32.910156 31.988281 32.40625 L 32.363281 31.976562 L 32.421875 32.253906 C 32.457031 32.398438 32.484375 32.882812 32.492188 33.324219 C 32.503906 34.324219 32.742188 36.539062 32.925781 37.308594 C 32.988281 37.628906 33.050781 37.949219 33.050781 38.023438 C 33.050781 38.1875 32.757812 38.1875 32.191406 38.015625 C 31.898438 37.921875 31.707031 37.90625 31.640625 37.96875 C 31.558594 38.050781 31.679688 38.648438 32.183594 40.691406 C 32.292969 41.148438 32.355469 41.570312 32.320312 41.632812 C 32.253906 41.734375 31.90625 41.671875 26.464844 40.527344 C 25.546875 40.332031 25.125 40.277344 25.082031 40.34375 C 25.054688 40.398438 25.097656 40.945312 25.191406 41.5625 C 25.28125 42.183594 25.320312 42.714844 25.273438 42.761719 C 25.125 42.90625 23.386719 42.230469 21.78125 41.394531 C 18.476562 39.671875 16 37.417969 14.507812 34.753906 C 12.289062 30.8125 11.921875 25.058594 13.5 18.65625 C 14.1875 15.832031 14.957031 13.898438 16 12.351562 C 16.550781 11.535156 17.339844 10.574219 17.464844 10.574219 C 17.503906 10.574219 18.273438 11.167969 19.171875 11.910156 Z M 10.054688 17.1875 C 10.292969 17.34375 10.3125 17.480469 10.210938 18.289062 C 10.117188 18.949219 10.128906 19.011719 10.355469 19.480469 C 10.523438 19.820312 10.789062 20.128906 11.246094 20.515625 C 11.65625 20.863281 11.886719 21.128906 11.886719 21.246094 C 11.886719 21.476562 11.621094 22.960938 11.574219 23.007812 C 11.558594 23.023438 11.082031 22.632812 10.523438 22.117188 C 9.960938 21.613281 9.394531 21.175781 9.265625 21.148438 C 9.148438 21.121094 8.507812 21.203125 7.855469 21.339844 C 6.527344 21.613281 6.371094 21.585938 6.152344 21.066406 C 6.085938 20.898438 5.996094 20.53125 5.96875 20.257812 C 5.914062 19.789062 5.929688 19.726562 6.140625 19.515625 C 6.28125 19.378906 6.480469 19.277344 6.617188 19.277344 C 6.949219 19.277344 7.488281 19.039062 7.78125 18.753906 C 7.917969 18.617188 8.140625 18.234375 8.277344 17.886719 C 8.578125 17.097656 8.753906 16.960938 9.394531 17.023438 C 9.660156 17.0625 9.953125 17.132812 10.054688 17.1875 Z M 43.332031 19.425781 C 43.625 19.570312 43.726562 19.875 43.652344 20.351562 C 43.578125 20.789062 43.460938 20.898438 43.269531 20.707031 C 43.09375 20.542969 43.046875 20.53125 42.867188 20.644531 C 42.664062 20.769531 42.792969 21.359375 43.175781 22.046875 C 43.371094 22.375 43.617188 22.757812 43.734375 22.886719 C 44.195312 23.375 44.175781 23.90625 43.671875 24.410156 C 43.277344 24.792969 42.921875 24.96875 42.363281 25.023438 C 41.96875 25.058594 41.773438 25.023438 41.207031 24.785156 C 40.445312 24.453125 39.757812 24.390625 39.136719 24.59375 C 38.945312 24.65625 38.210938 24.996094 37.523438 25.351562 C 36.828125 25.710938 36.242188 25.976562 36.214844 25.957031 C 36.195312 25.929688 36.285156 25.601562 36.425781 25.222656 L 36.84375 24.117188 C 37.011719 23.675781 37.257812 23.492188 38.769531 22.714844 C 38.960938 22.613281 39.421875 22.253906 39.785156 21.917969 C 40.289062 21.449219 40.539062 21.121094 40.878906 20.476562 C 41.125 20.027344 41.398438 19.582031 41.492188 19.496094 C 41.839844 19.1875 42.792969 19.148438 43.332031 19.425781 Z M 34.65625 32.882812 C 35.855469 33.515625 36.277344 33.554688 36.902344 33.085938 C 37.433594 32.699219 38.035156 32.671875 38.402344 33.011719 C 38.804688 33.386719 38.722656 33.820312 38.117188 34.46875 C 37.816406 34.800781 37.660156 35.101562 37.585938 35.542969 C 37.476562 36.171875 37.320312 36.320312 36.816406 36.320312 C 36.3125 36.320312 36.230469 36.246094 36.085938 35.714844 C 35.929688 35.136719 35.71875 34.9375 34.617188 34.3125 L 33.601562 33.734375 L 33.601562 33.058594 C 33.601562 32.683594 33.621094 32.378906 33.648438 32.378906 C 33.667969 32.378906 34.125 32.609375 34.65625 32.882812 Z M 12.75 33.5625 L 13.070312 34.195312 L 12.691406 34.441406 C 11.933594 34.945312 11.539062 35.386719 11.472656 35.796875 C 11.335938 36.6875 11.042969 36.941406 10.320312 36.824219 C 9.835938 36.742188 9.550781 36.457031 9.476562 35.980469 C 9.402344 35.550781 9 35.082031 8.523438 34.890625 C 8.359375 34.816406 8.15625 34.652344 8.074219 34.523438 C 7.765625 34.058594 8.277344 33.203125 8.871094 33.203125 C 9.019531 33.203125 9.347656 33.289062 9.613281 33.398438 C 10.328125 33.679688 11.136719 33.617188 11.75 33.222656 C 12.007812 33.066406 12.261719 32.929688 12.316406 32.929688 C 12.382812 32.929688 12.574219 33.214844 12.75 33.5625 Z M 19.085938 15.652344 C 18.242188 15.964844 17.691406 17.046875 17.601562 18.566406 C 17.554688 19.308594 17.574219 19.484375 17.738281 19.859375 C 18.085938 20.640625 18.984375 20.792969 19.550781 20.171875 C 19.84375 19.851562 20.3125 18.769531 20.550781 17.84375 C 20.972656 16.230469 20.292969 15.222656 19.085938 15.652344 Z M 19.597656 23.757812 C 18.996094 23.859375 18.710938 24.40625 18.984375 24.9375 C 19.261719 25.480469 20.507812 26.085938 21.394531 26.101562 C 22.578125 26.128906 22.816406 24.976562 21.769531 24.296875 C 21.210938 23.941406 20.128906 23.664062 19.597656 23.757812 Z M 19.597656 23.757812 "
                                }
                              },
                              {
                                type: "path",
                                props: {
                                  fill: "#fff",
                                  d: "M 25.019531 0.0195312 C 11.269531 0.0195312 0.0195312 11.269531 0.0195312 25.019531 C 0.0195312 38.769531 11.269531 50.019531 25.019531 50.019531 C 38.769531 50.019531 50.019531 38.769531 50.019531 25.019531 C 50.019531 11.269531 38.769531 0.0195312 25.019531 0.0195312 Z M 25.019531 45.019531 C 14.019531 45.019531 5.019531 36.019531 5.019531 25.019531 C 5.019531 14.019531 14.019531 5.019531 25.019531 5.019531 C 36.019531 5.019531 45.019531 14.019531 45.019531 25.019531 C 45.019531 36.019531 36.019531 45.019531 25.019531 45.019531 Z M 25.019531 45.019531 "
                                }
                              }
                            ]
                          }
                        },
                        {
                          type: "p",
                          props: {
                            style: {
                              textTransform: "uppercase",
                              letterSpacing: "0.4px",
                              fontSize: "24px",
                              fontWeight: "semibold",
                              color: "#fff",
                              margin: 0
                            },
                            children: SITE.website.replace("https://", "")
                          }
                        }
                      ]
                    }
                  },
                  {
                    type: "p",
                    props: {
                      style: {
                        lineHeight: "40px",
                        letterSpacing: "-0.8px",
                        fontSize: "48px",
                        fontWeight: "bold",
                        textAlign: "left",
                        color: "#fff",
                        margin: 0
                      },
                      children: title
                    }
                  },
                  {
                    type: "p",
                    props: {
                      style: {
                        lineHeight: "24px",
                        fontSize: "24px",
                        letterSpacing: 0,
                        fontWeight: "semibold",
                        textAlign: "left",
                        color: "#fff",
                        margin: 0
                      },
                      children: `by ${SITE.author}`
                    }
                  },
                  {
                    type: "p",
                    props: {
                      style: {
                        lineHeight: "16px",
                        fontSize: "16px",
                        letterSpacing: "0.8px",
                        fontWeight: "semibold",
                        textAlign: "left",
                        color: "#fff",
                        textTransform: "uppercase",
                        margin: 0
                      },
                      children: readingTime
                    }
                  }
                ]
              }
            }
          ]
        }
      },
      {
        type: "div",
        props: {
          style: { display: "flex", position: "relative", width: "100%" },
          children: [
            {
              type: dynamicOgImg ? "img" : "div",
              props: {
                ...(dynamicOgImg ? { src: dynamicOgImg } : {}),
                style: {
                  display: dynamicOgImg ? "block" : "flex",
                  width: "100%",
                  height: "100%",
                  ...(dynamicOgImg
                    ? {
                        borderStyle: "none",
                        objectFit: "cover",
                        objectPosition: "center",
                        aspectRatio: "16/9",
                        position: "absolute"
                      }
                    : {}),
                  clipPath: "polygon(157.5px 0, 840px 0, 840px 840px, 0 630px)",
                  background: `linear-gradient(270deg, ${fill} 0%, ${border} 20%, ${accent} 100%)`
                }
              }
            }
          ]
        }
      }
    ]
  }
});
